/* ===== AGML LABEL (ISOLATED) ===== */

.agml-label-wrap {
  position: relative;
  width: 360px;
  margin: 30px auto;
}

.agml-label-base {
  width: 100%;
  height: auto;
  display: block;
}

/* ブロック重ね用 */
.agml-label-overlay {
  position: absolute;
  inset: 0;
}

/* 共通ブロック */
.agml-label-overlay .block {
  position: absolute;
  width: 100%;
  height: auto;
  top: 0;
  left: 0;
  opacity: 0.2; /* 非アクティブは20% */
}

/* アクティブブロック */
.agml-label-wrap[data-level="1"] .block-1,
.agml-label-wrap[data-level="2"] .block-1,
.agml-label-wrap[data-level="3"] .block-1,
.agml-label-wrap[data-level="4"] .block-1,
.agml-label-wrap[data-level="5"] .block-1 {
  opacity: 1;
}

.agml-label-wrap[data-level="2"] .block-2,
.agml-label-wrap[data-level="3"] .block-2,
.agml-label-wrap[data-level="4"] .block-2,
.agml-label-wrap[data-level="5"] .block-2 {
  opacity: 1;
}

.agml-label-wrap[data-level="3"] .block-3,
.agml-label-wrap[data-level="4"] .block-3,
.agml-label-wrap[data-level="5"] .block-3 {
  opacity: 1;
}

.agml-label-wrap[data-level="4"] .block-4,
.agml-label-wrap[data-level="5"] .block-4 {
  opacity: 1;
}

.agml-label-wrap[data-level="5"] .block-5 {
  opacity: 1;
}

/* ===========================
   判定結果 Step3 alert-box 専用調整
   =========================== */
body.download-page #alert-result {
  max-width: 100%;
  width: 100%;
  margin-top: -6px;
  margin-bottom: 0px;
}

/* =========================
   Level Dot Position by %
   ========================= */

/* 80%（4段階目） */
body.download-page[data-level="4"] .level-dot {
  top: 176px;   /* 仮：後で微調整 */
  left: 76px;  /* 仮：後で微調整 */
}

/* 60%（3段階目） */
body.download-page[data-level="3"] .level-dot {
  top: 230px;   /* 仮：後で微調整 */
  left: 150px;  /* 仮：後で微調整 */
}

/* 40%（2段階目） */
body.download-page[data-level="2"] .level-dot {
  top: 176px;   /* 仮：後で微調整 */
  left: 227px;  /* 仮：後で微調整 */
}

/* 20%（1段階目） */
body.download-page[data-level="1"] .level-dot {
  top: 87px;   /* 仮：後で微調整 */
  left: 198px;  /* 仮：後で微調整 */
}

/* =========================
   ラベル表示エリア（3レイヤー構成）
   ========================= */

body.download-page .agml-label-stage {
  position: relative;
  width: 320px;
  height: 320px;
  margin: 40px auto;
}

/* レイヤー①：最下層 */
body.download-page .agml-label-base {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* =========================
   円ゲージ（テスト用）
   ========================= */

/* レイヤー②：円ゲージ */
body.download-page .agml-test-gauge {
  --percent: 0;

  position: absolute;
  inset: 0;
  margin: auto;

  width: 220px;
  height: 220px;
  border-radius: 50%;
  z-index: 2;
  pointer-events: none;

  background:
    conic-gradient(
      #00CCFF calc(var(--percent) * 1%),
      #1a3a4a calc(var(--percent) * 1%)  /* 未塗り部分：不透明な暗い色（フェードなし） */
    );

  /* 中央を抜いてリング化（外形81%は固定、内側を調整して太さ変更） */
  /* フェード無し：同じ位置で切り替えてシャープなエッジ */
  -webkit-mask:
    radial-gradient(
      farthest-side,
      transparent 50%,  /* 内側：小さくするとリングが太くなる */
      #000 50%,         /* 同じ位置で不透明に（フェード無し） */
      #000 81%          /* 外形：固定 */
    );
  mask:
    radial-gradient(
      farthest-side,
      transparent 50%,  /* 内側：小さくするとリングが太くなる */
      #000 50%,         /* 同じ位置で不透明に（フェード無し） */
      #000 81%          /* 外形：固定 */
    );

  /* ★ transition は使わない */
  transition: none;
}

/* =========================
   ラベル背景画像（最前面）
   ========================= */

/* レイヤー③：最前面フレーム */
body.download-page .agml-label-bg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 3;
  pointer-events: none;
}

/* =========================
   評価確定ドット（白●）
   ========================= */

/* レイヤー④：評価確定ドット */
body.download-page .agml-level-dot {
  position: absolute;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #ffffff;
  z-index: 4;

  opacity: 0;
  transform: scale(0.6);
  transition:
    opacity 0.1s ease,
    transform 0.1s ease;
}

/* 表示状態 */
body.download-page .agml-level-dot.is-visible {
  opacity: 1;
  transform: scale(1);
}

/* ===== ドット位置：％別 ===== */

/* 100%（5ブロック目） */
body.download-page[data-originality="100"] .agml-level-dot {
  top: 88px;
  left: 104px;
}

/* 80%（4ブロック目） */
body.download-page[data-originality="80"] .agml-level-dot {
  top: 176px;
  left: 76px;
}

/* 60%（3ブロック目） */
body.download-page[data-originality="60"] .agml-level-dot {
  top: 230px;
  left: 150px;
}

/* 40%（2ブロック目） */
body.download-page[data-originality="40"] .agml-level-dot {
  top: 176px;
  left: 226px;
}

/* 20%（1ブロック目） */
body.download-page[data-originality="20"] .agml-level-dot {
  top: 90px;
  left: 198px;
}

/* =========================
   評価確定ライン（100%専用）
   ========================= */

/* レイヤー⑤：評価確定ライン */
body.download-page .agml-level-line {
  position: absolute;
  width: 54px;
  height: 2px;
  background: #ffffff;
  z-index: 5;

  opacity: 0;

  /* 回転は初期状態で確定させる */
  /* 右端（●側）を基準にして伸びる */
  transform-origin: right center;
  transform: rotate(var(--line-rotate, 0deg)) scaleX(0);

  transition:
    opacity 0.1s ease,
    transform 0.25s ease;
}

/* 表示状態：scaleX だけを伸ばす */
body.download-page .agml-level-line.is-visible {
  opacity: 1;
  transform: rotate(var(--line-rotate, 0deg)) scaleX(1);
}

/* ===== 100%ライン位置・角度 ===== */
body.download-page[data-originality="100"] .agml-level-line {
  top: 98px;                 /* ドットの位置に合わせる */
  left: 60px;               /* ドットの位置に合わせる */
  --line-rotate: 40deg;
}

/* ===== 80% 用ライン（追加） ===== */
body.download-page[data-originality="80"] .agml-level-line {
  top: 184px;
  left: 4px;
  --line-rotate: -78deg;
  width: 80px;
}

/* ===== 60% 用ライン（追加） ===== */
body.download-page[data-originality="60"] .agml-level-line {
  top: 238px;
  left: 104px;
  --line-rotate: -25deg;
  width: 60px;
}

/* ===== 40% 用ライン（追加） ===== */
body.download-page[data-originality="40"] .agml-level-line {
  top: 182px;
  left: 158px;
  --line-rotate: -100deg;
  width: 78px;
}

/* ===== 20% 用ライン（追加） ===== */
body.download-page[data-originality="20"] .agml-level-line {
  top: 90px;
  left: 170px;
  --line-rotate: 130deg;
  width: 42px;
}
