/* ===== AGML LABEL (ISOLATED) ===== */

.agml-label-wrap {
  position: relative;
  width: 360px;
  margin: 30px auto;
}

.agml-label-base {
  width: 100%;
  height: auto;
  display: block;
}

/* ブロック重ね用 */
.agml-label-overlay {
  position: absolute;
  inset: 0;
}

/* 共通ブロック */
.agml-label-overlay .block {
  position: absolute;
  width: 100%;
  height: auto;
  top: 0;
  left: 0;
  opacity: 0.2; /* 非アクティブは20% */
}

/* アクティブブロック */
.agml-label-wrap[data-level="1"] .block-1,
.agml-label-wrap[data-level="2"] .block-1,
.agml-label-wrap[data-level="3"] .block-1,
.agml-label-wrap[data-level="4"] .block-1,
.agml-label-wrap[data-level="5"] .block-1 {
  opacity: 1;
}

.agml-label-wrap[data-level="2"] .block-2,
.agml-label-wrap[data-level="3"] .block-2,
.agml-label-wrap[data-level="4"] .block-2,
.agml-label-wrap[data-level="5"] .block-2 {
  opacity: 1;
}

.agml-label-wrap[data-level="3"] .block-3,
.agml-label-wrap[data-level="4"] .block-3,
.agml-label-wrap[data-level="5"] .block-3 {
  opacity: 1;
}

.agml-label-wrap[data-level="4"] .block-4,
.agml-label-wrap[data-level="5"] .block-4 {
  opacity: 1;
}

.agml-label-wrap[data-level="5"] .block-5 {
  opacity: 1;
}

/* ===========================
   判定結果 Step3 alert-box 専用調整
   =========================== */
body.download-page #alert-result {
  max-width: 100%;
  width: 100%;
  margin-top: -6px;
  margin-bottom: 0px;
}

/* =========================
   Level Dot Position by %
   ========================= */

/* 80%（4段階目） */
body.download-page[data-level="4"] .level-dot {
  top: 176px;   /* 仮：後で微調整 */
  left: 76px;  /* 仮：後で微調整 */
}

/* 60%（3段階目） */
body.download-page[data-level="3"] .level-dot {
  top: 230px;   /* 仮：後で微調整 */
  left: 150px;  /* 仮：後で微調整 */
}

/* 40%（2段階目） */
body.download-page[data-level="2"] .level-dot {
  top: 176px;   /* 仮：後で微調整 */
  left: 227px;  /* 仮：後で微調整 */
}

/* 20%（1段階目） */
body.download-page[data-level="1"] .level-dot {
  top: 87px;   /* 仮：後で微調整 */
  left: 198px;  /* 仮：後で微調整 */
}

/* =========================
   ラベル表示エリア（3レイヤー構成）
   ========================= */

body.download-page .agml-label-stage {
  position: relative;
  width: 320px;
  height: 320px;
  margin: 40px auto;
}

/* レイヤー①：最下層 */
body.download-page .agml-label-base {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* =========================
   円ゲージ（テスト用）
   ========================= */

/* レイヤー②：円ゲージ */
body.download-page .agml-test-gauge {
  --percent: 0;

  position: absolute;
  inset: 0;
  margin: auto;

  width: 220px;
  height: 220px;
  border-radius: 50%;
  z-index: 2;
  pointer-events: none;

  background:
    conic-gradient(
      rgba(0, 204, 255, 1) calc(var(--percent) * 1%),
      rgba(0, 204, 255, 0.2) calc(var(--percent) * 1%)  /* 未達成部分：#00CCFF の 20% 透過 */
    );

  /* 中央を抜いてリング化（外形81%は固定、内側を調整して太さ変更） */
  /* フェード無し：同じ位置で切り替えてシャープなエッジ */
  -webkit-mask:
    radial-gradient(
      farthest-side,
      transparent 50%,  /* 内側：小さくするとリングが太くなる */
      #000 50%,         /* 同じ位置で不透明に（フェード無し） */
      #000 81%          /* 外形：固定 */
    );
  mask:
    radial-gradient(
      farthest-side,
      transparent 50%,  /* 内側：小さくするとリングが太くなる */
      #000 50%,         /* 同じ位置で不透明に（フェード無し） */
      #000 81%          /* 外形：固定 */
    );

  /* ★ transition は使わない */
  transition: none;
}

/* =========================
   ラベル背景画像（最前面）
   ========================= */

/* レイヤー③：最前面フレーム */
body.download-page .agml-label-bg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 3;
  pointer-events: none;
}

/* =========================
   評価確定ドット（白●）
   ========================= */

/* レイヤー④：評価確定ドット */
body.download-page .agml-level-dot {
  position: absolute;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #ffffff;
  z-index: 4;

  opacity: 0;
  transform: scale(0.6);
  transition:
    opacity 0.1s ease,
    transform 0.1s ease;
}

/* 表示状態 */
body.download-page .agml-level-dot.is-visible {
  opacity: 1;
  transform: scale(1);
}

/* ===== ドット位置：％別 ===== */

/* 100%（5ブロック目） */
body.download-page[data-originality="100"] .agml-level-dot {
  top: 88px;
  left: 104px;
}

/* 80%（4ブロック目） */
body.download-page[data-originality="80"] .agml-level-dot {
  top: 176px;
  left: 76px;
}

/* 60%（3ブロック目） */
body.download-page[data-originality="60"] .agml-level-dot {
  top: 230px;
  left: 150px;
}

/* 40%（2ブロック目） */
body.download-page[data-originality="40"] .agml-level-dot {
  top: 176px;
  left: 226px;
}

/* 20%（1ブロック目） */
body.download-page[data-originality="20"] .agml-level-dot {
  top: 90px;
  left: 198px;
}

/* =========================
   評価確定ライン（100%専用）
   ========================= */

/* レイヤー⑤：評価確定ライン */
body.download-page .agml-level-line {
  position: absolute;
  width: 54px;
  height: 2px;
  background: #ffffff;
  z-index: 5;

  opacity: 0;

  /* 回転は初期状態で確定させる */
  /* 右端（●側）を基準にして伸びる */
  transform-origin: right center;
  transform: rotate(var(--line-rotate, 0deg)) scaleX(0);

  transition:
    opacity 0.1s ease,
    transform 0.25s ease;
}

/* 表示状態：scaleX だけを伸ばす */
body.download-page .agml-level-line.is-visible {
  opacity: 1;
  transform: rotate(var(--line-rotate, 0deg)) scaleX(1);
}

/* ===== 100%ライン位置・角度 ===== */
body.download-page[data-originality="100"] .agml-level-line {
  top: 98px;                 /* ドットの位置に合わせる */
  left: 60px;               /* ドットの位置に合わせる */
  --line-rotate: 40deg;
}

/* ===== 80% 用ライン（追加） ===== */
body.download-page[data-originality="80"] .agml-level-line {
  top: 184px;
  left: 4px;
  --line-rotate: -78deg;
  width: 80px;
}

/* ===== 60% 用ライン（追加） ===== */
body.download-page[data-originality="60"] .agml-level-line {
  top: 236px;
  left: 122px;
  --line-rotate: -90deg;
  width: 38px;
}

/* ===== 40% 用ライン（追加） ===== */
body.download-page[data-originality="40"] .agml-level-line {
  top: 182px;
  left: 158px;
  --line-rotate: -100deg;
  width: 78px;
}

/* ===== 20% 用ライン（追加） ===== */
body.download-page[data-originality="20"] .agml-level-line {
  top: 90px;
  left: 170px;
  --line-rotate: 130deg;
  width: 42px;
}

/* =========================
   AGML 数値表示（100%専用）
   ========================= */

/* フォント定義 */
@font-face {
  font-family: 'AGML-FearRobot';
  src: url('../img/fonts/FearRobot-Regular.ttf') format('truetype');
  font-display: swap;
}

@font-face {
  font-family: 'AGML-Impact';
  src: url('../img/fonts/impact.ttf') format('truetype');
  font-display: swap;
}

/* 数値表示ベース */
body.download-page .agml-percent-display {
  position: absolute;
  /* X,Y は調整可能にする */
  left: var(--agml-percent-x, 70px);
  top: var(--agml-percent-y, 15%);
  transform: translate(-50%, -50%);
  display: flex;
  align-items: baseline;
  gap: var(--agml-digit-gap, 1px);
  pointer-events: none;
  z-index: 6;
}

/* 数字 */
body.download-page .agml-digit {
  font-family: 'AGML-FearRobot', sans-serif;
  font-size: var(--agml-digit-size, 24px);
  color: #ffffff;
  opacity: 0;
  transform: translateY(6px);
  transition: none;
}

/* 1と0の間隔を個別調整 */
body.download-page .agml-digit.d1 {
  margin-right: var(--agml-digit-1-gap, -7px); /* 1と0の間隔を狭く（負の値でさらに狭く） */
}

/* % 記号 */
body.download-page .agml-percent-symbol {
  font-family: 'AGML-Impact', sans-serif;
  font-size: var(--agml-percent-size, 22px);
  color: #ffffff;
  margin-left: var(--agml-percent-gap, 2px);
  opacity: 0;
  transform: translateY(6px);
  transition: none;
}

/* =========================
   各％値ごとの個別調整
   ========================= */

/* 100%専用の個別調整 */
body.download-page .agml-percent-display[data-percent="100"] {
  --agml-percent-x: 70px;
  --agml-percent-y: 16%;
  --agml-digit-size: 24px;
  --agml-percent-size: 22px;
  --agml-digit-gap: 1px;
  --agml-percent-gap: 2px;
}

/* 100%の1と0の間隔を個別調整 */
body.download-page .agml-percent-display[data-percent="100"] .agml-digit.d1 {
  margin-right: var(--agml-digit-1-gap, -7px);
}

/* 80%専用の個別調整 */
body.download-page .agml-percent-display[data-percent="80"] {
  --agml-percent-x: 65px;
  --agml-percent-y: 87.4%;
  --agml-digit-size: 24px;
  --agml-percent-size: 22px;
  --agml-digit-gap: 1px;
  --agml-percent-gap: 2px;
}

/* 80%の8と0の間隔は gap で調整（margin-right を削除して gap を有効化） */
body.download-page .agml-percent-display[data-percent="80"] .agml-digit.d1 {
  margin-right: 0; /* gap プロパティを有効にするため margin-right を削除 */
}

/* 60%専用の個別調整 */
body.download-page .agml-percent-display[data-percent="60"] {
  --agml-percent-x: 160px;
  --agml-percent-y: 91.2%;
  --agml-digit-size: 24px;
  --agml-percent-size: 22px;
  --agml-digit-gap: 2px;
  --agml-percent-gap: 2px;
}

/* 60%の6と0の間隔を個別調整 */
body.download-page .agml-percent-display[data-percent="60"] .agml-digit.d1 {
  margin-right: 0;
}

/* 40%専用の個別調整 */
body.download-page .agml-percent-display[data-percent="40"] {
  --agml-percent-x: 248px;
  --agml-percent-y: 86.4%;
  --agml-digit-size: 24px;
  --agml-percent-size: 22px;
  --agml-digit-gap: 1px;
  --agml-percent-gap: 2px;
}

/* 40%の4と0の間隔を個別調整 */
body.download-page .agml-percent-display[data-percent="40"] .agml-digit.d1 {
  margin-right: 0;
}

/* 20%専用の個別調整 */
body.download-page .agml-percent-display[data-percent="20"] {
  --agml-percent-x: 239px;
  --agml-percent-y: 14%;
  --agml-digit-size: 24px;
  --agml-percent-size: 22px;
  --agml-digit-gap: 1px;
  --agml-percent-gap: 2px;
}

/* 20%の2と0の間隔を個別調整 */
body.download-page .agml-percent-display[data-percent="20"] .agml-digit.d1 {
  margin-right: 0;
}
