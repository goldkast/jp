# AGML（AI-Generated Music Label）プロジェクト仕様書

## 0. 開発方針（最重要）

- **既存サイトのコードや WordPress のコードは一切使用しない。**
- 参考にするのは、制作者が順次アップロードする **「既存サイトのスクリーンショット」だけ。**
- HTML / CSS / JS は **すべて 0 ベースで新規実装** すること。
- 過去に「WordPress用プラグイン」として実装したダウンロードページやAIレベルチェッカーは、**挙動やUIの仕様だけを参考にし、コードは流用しない。**
  - PHP / テンプレートタグ / ショートコードなど CMS 固有の仕組みは使わない。
- 目標は **「AGML 専用の、独立したプレーンな Web アプリ / サイト」** を作ること。
- **用語について：** 
  - 「Gメニュー」は「グローバルナビゲーション（グローバルナビ）」を指します。
  - 「AI Generated」は「AI-Generated」に統一してください（ハイフン付き）。alt属性、名称、すべてのファイルで統一すること。

> 👉 Cursor へのお願い：  
> スクリーンショットを受け取ったら、それをデザインの"仕様"とみなし、  
> WordPress テーマやプラグインを想定せず、  
> 純粋な HTML / CSS / JS として最適な構造を自分から提案・実装してほしい。

---

## 1. プロジェクトの目的

- **プロジェクト名：AGML – AI-Generated Music Label**

- **目的：**
  1. 楽曲ごとに「AIをどの程度使ったか」を数値化・可視化する
  2. 結果に基づき **AGMLラベル** や **各種証明書** を生成・表示・ダウンロードできるようにする
  3. SNSログインしたユーザーが、自分の楽曲ごとの証明書／ショートURL／QRコードを管理できるようにする

---

## 2. コンセプト（背景）

- これから、誰でも簡単に AI で音楽を作れる時代が来る。
- 「人間が作詞作曲した部分」と「AIが生成した部分」が混ざり合い、境界が曖昧になる。
- **AGML は、AI使用率と著作権保有割合を可視化し、人間の創作とAI生成作品の両方を尊重するための"透明性インフラ"** を目指す。
- 単なるラベル画像配布ではなく、
  - AI使用率の診断・表示
  - 著作権保有割合の概念的ガイド
  - ラベル・証明書・ショートURL・QRコードの管理
  を行う準規格的なサービス。

---

## 3. データモデル（1曲単位）

1曲ごとに、最低限以下の情報を持つ想定：

```typescript
type TrackRecord = {
  trackId: string;          // 内部ID
  title: string;            // 曲名
  artistName: string;       // 作者名
  releaseDate: string;      // リリース日（YYYY-MM-DD）
  lyricAiRate: number;      // 作詞AI使用割合（0〜100, 20刻み）
  composeAiRate: number;    // 作曲AI使用割合（0〜100, 20刻み）
  totalAiRate: number;      // 総合AI使用割合（0〜100, 20刻み）
  copyrightRate: number;   // 著作権保有割合（0〜100, 20刻み）
  labelType: string;       // AGMLラベルの種類（拡張用）
  shortUrlPublic: string;   // 公開用証明書ページへのショートURL
  qrCodePublic: string;    // 上記URLのQR（画像パス or データURI）
  createdAt: string;        // 作成日時
};
```

- 静的版では、デモ用 JSON をフロント側で読み込むだけでもOK。
- 将来はバックエンド/API から取得する想定で、モジュール構成を組んでほしい。

---

## 4. 指標の意味（AI使用率／著作権）

1. **作詞AI使用割合** (`lyricAiRate`)
2. **作曲AI使用割合** (`composeAiRate`)
3. **総合AI使用割合** (`totalAiRate`)
4. **著作権保有割合** (`copyrightRate`)

**共通仕様：**
- 表示は **20 / 40 / 60 / 80 / 100％の5段階** を基本とする。
- 著作権保有割合は ★1〜5 に変換（20％ごとに★1つ）。

---

## 5. 画面仕様

### 5.1 判定結果画面（ダウンロードページ内メインUI）

**役割：**  
ユーザーが入力した AI 使用率を反映し、結果と AGMLラベルを確認 → ラベルDLへ進む画面。

**表示要素（上から順）**
1. 作詞AI使用割合ゲージ
2. 作曲AI使用割合ゲージ
3. 総合AI使用割合ゲージ
4. 著作権保有割合（★＋数値）
5. 各項目の説明テキスト（ボックス）
6. **AI生成音楽ラベル（AGML）画像**
7. 「ラベルダウンロードへ進む」ボタン
8. 「公開前確認用証明書（Smart Display）を見る」ボタン or タブ切り替え

**ゲージ仕様**
- 横長バー（プログレスバー風）
- 20,40,60,80,100% の5ステップが視覚的に分かる
- 数値表示：「作詞AI使用割合：80%」など
- 実装は `download.js`＋`download.css` で行う

**著作権保有割合（★）**
- 20％→★1、100％→★5 まで
- 「著作権保有割合：20％ ★☆☆☆☆」のように表示
- 下に補足文（既存テキストを流用）

---

### 5.2 公開前確認用証明書（Smart Display）

**役割：**  
リリース前の確認用／関係者共有用の **内部証明書ビュー**。  
ここで曲情報を登録できる。

**表示内容（上から順）**
1. **曲情報**
   - 曲名 (`title`)
   - 作者名 (`artistName`)
   - リリース日 (`releaseDate`)
2. AI生成音楽ラベル（AGML）画像
3. 作詞AI使用割合
4. 作曲AI使用割合
5. 総合AI使用割合
6. 著作権保有割合
7. **公開用証明書ページへのショートURL** (`shortUrlPublic`)
8. **上記URLのQRコード画像** (`qrCodePublic`)
9. ラベルダウンロードリンク

> **重要：**  
> この「公開前確認用証明書」ページは、ショートURLのリンク先とは **別ページ**。  
> ここから外部公開用 URL / QR を確認できる。

---

### 5.3 公開用証明書ページ（ショートURLのリンク先）

**URL例：** `https://agml.jp/s/abcd1234`

**役割：**  
リスナーや第三者が見る **簡易な公開証明書**。

**表示内容**
1. 曲名・作者名・リリース日
2. AGMLラベル画像
3. 作詞AI使用割合・作曲AI使用割合・総合AI使用割合・著作権保有割合（簡易UIでOK）
4. サイトトップや「AGMLとは？」へのリンク

静的デモでは数曲分だけでも良い。  
将来は `trackId` に基づいてAPIから `TrackRecord` を取得する前提で構成。

---

### 5.4 アカウント作成 & 証明書管理

**目的：**  
Google / Facebook / LINE などの SNS アカウントでログインし、過去の全ての楽曲証明書を管理できるようにする。

**要素**
1. **SNSログインUI**
   - Google / Facebook / LINE のボタン
   - 現段階ではフロント側のモックでも良い（将来API接続）
2. **マイページ／ダッシュボード**
   - ログイン後にアクセスできるページ
   - `TrackRecord[]` を一覧表示

**一覧表示内容（例）**
- 曲名
- リリース日
- 総合AI使用割合（簡易表示）
- 著作権保有割合（★）
- 公開用ショートURL
- 公開用QRコード（サムネイル）
- 「公開前確認証を見る」（Smart Displayへ）
- 「ラベルDL」ボタン

> Cursor へのお願い：  
> まずはダミーJSONを読み込んでマイページUIを実装し、  
> 後からAPIに差し替えられる構造（関数分割・モジュール化）を提案してほしい。

---

### 5.5 サムネイル生成ページ（将来）

- YouTube サムネ用などの画像をアップロード
- キャンバスに表示
- AGMLラベル画像を任意位置にドラッグ＆ドロップ配置
- タイトル文字を入力・配置
- 完成画像をダウンロード（PNGなど）

ファイル例：`thumbnail.html / thumbnail.js / thumbnail.css`

---

## 6. サイト構成（ページ一覧）

1. ホーム（サービス概要・手順説明）
2. ラベルについて
3. ダウンロードページ（判定結果UI）
4. 公開前確認用証明書（Smart Display）
5. 公開用証明書ページ（ショートURL用）
6. マイページ／ダッシュボード（要ログイン）
7. ご利用者様へ
8. ミッション
9. 利用規約
10. プライバシーポリシー
11. Cookieポリシー
12. FAQ
13. お問い合わせ
14. サムネイル生成ページ（将来）

### 6.1 ページ・ディレクトリ構成

```
/
├── index.html                    # トップページ（JP）。全体レイアウトと共通ヘッダー／フッターの土台
├── css/                          # サイト全体のスタイルシート
│   ├── style.css                 # メインスタイルシート
│   └── override.css              # 上書き用スタイル
├── js/                           # フロント側の JavaScript
│   └── (ナビ挙動・アニメーション・フォーム制御など)
├── img/                          # サイト共通の画像（ロゴ、背景、バナー、アイコンなど）
├── label/                        # AGML ラベル関連のページ・アセット群
├── download/                     # ラベルや資料のダウンロードページ用 HTML／リソース
├── mission/                      # ミッション／コンセプト紹介ページ
├── plugin/                       # 旧 WP 由来など、プラグイン相当のスクリプトや専用 UI
├── contact/                      # お問い合わせページ関連
├── faq/                          # FAQ（よくある質問）ページ関連
├── short/                        # ショート解説・ランディング用途のページ類
├── user/                         # 利用者向けガイド、ユーザー事例など
├── cookie-policy/                # クッキーポリシー
├── privacy_policy/                # プライバシーポリシー
└── terms_of_condition/           # 利用規約
```

**各ディレクトリの説明：**

- `/index.html` - トップページ（JP）。全体レイアウトと共通ヘッダー／フッターの土台。

- `/css/` - サイト全体のスタイルシート。例：`style.css`, `override.css` など。

- `/js/` - フロント側の JavaScript。ナビ挙動・アニメーション・フォーム制御など。

- `/img/` - サイト共通の画像（ロゴ、背景、バナー、アイコンなど）。

- `/label/` - AGML ラベル関連のページ・アセット群。

- `/download/` - ラベルや資料のダウンロードページ用 HTML／リソース。

- `/mission/` - ミッション／コンセプト紹介ページ。

- `/plugin/` - 旧 WP 由来など、プラグイン相当のスクリプトや専用 UI。**注意：コードは参考にしない。挙動やUIの仕様だけを参考にする。**

- `/contact/` - お問い合わせページ関連。

- `/faq/` - FAQ（よくある質問）ページ関連。

- `/short/` - ショート解説・ランディング用途のページ類。

- `/user/` - 利用者向けガイド、ユーザー事例など。

- `/cookie-policy/` - クッキーポリシー

- `/privacy_policy/` - プライバシーポリシー

- `/terms_of_condition/` - 利用規約

---

## 7. デザイン・実装トーン

- **テーマカラー：** 青系（例：`#39f`）
- **デザイン：** 白背景＋カード＋ドロップシャドウで「証明書」「ラベル」感を演出
- **スタイル：** 角丸多めで固すぎない印象
- **フォント：** Meiryo,"Hiragino Kaku Gothic ProN","Hiragino Sans",sans-serif

### 7.1 PC・スマホ同時進行の開発方針（重要）

- **PCデザインだけ先に作り、あとからスマホ対応するのは禁止。**
- 各ページ・各コンポーネントを作成するときは、**PCレイアウトとスマホレイアウト（幅375px想定）を同時に設計・実装すること。**
- 具体的には：
  - 1つのセクションを作るたびに、**ブラウザの幅をPC／スマホに切り替えて崩れがないか必ず確認する。**
  - レイアウトや余白は、PCとスマホで
    - 見出し
    - テキストの折り返し
    - ゲージや★表示のサイズ
    - カードの幅・高さ
    が自然に見えるように **両方同時に調整** する。
- 必要に応じて、モバイルファースト（`min-width` ベース）か、PCファースト（`max-width` ベース）かは、**保守しやすいほうを Cursor 側から提案してよい。**  
  ただし、どちらを選んでも「PCとスマホで別々に後追い実装する」のではなく、**常に両方を意識したCSS設計**を行うこと。

### 7.2 レスポンシブで特に注意するポイント

- **最重要ブレイクポイント：** 幅375px前後（スマホ）
- 以下の要素はスマホ時に崩れやすいため、実装直後に必ず確認する：
  - ゲージ（AI使用率バー）の幅とラベル位置
  - ★表示とテキストの折り返し
  - カードの内側余白（padding）が詰まりすぎないか
  - 長い日本語テキスト（説明ボックス）の読みやすさ
- PCとスマホで、同じ情報量を見せるべきか、スマホでは一部を折りたたむべきかなど、**UI/UX上の工夫が必要だと思ったら、Cursor から積極的に提案してよい。**

> **Cursor へのお願い（PC・スマホ両対応について）**  
> コンポーネントやセクションを実装する際は、  
> **「PCでOKだから終わり」ではなく、PC・スマホ両方のスクリーンショットや実際の挙動を確認したうえで、完成と判断してください。**
> - PC表示だけでなく、スマホ表示（レスポンシブ）も必ず確認すること
> - レイアウト崩れ・テキストの読みにくさ・ボタンの押しづらさなどを、両方の画面サイズでチェックすること

---

## 8. 技術スタック

### 8.1 使用技術
- **フロントエンド：** HTML5, CSS3, JavaScript (ES6+)
- **フレームワーク：** 使用しない（プレーンなHTML/CSS/JS）
- **ビルドツール：** 必要に応じて検討（現段階では不要の可能性が高い）

### 8.2 データ管理
- **現段階：** フロントエンドでJSONファイルを読み込む
- **将来：** バックエンドAPIから取得する想定
- **モジュール設計：** APIに差し替えやすい構造で実装

### 8.3 認証
- **現段階：** SNSログインはモック実装（フロントエンドのみ）
- **将来：** Google / Facebook / LINE のOAuth実装

### 8.4 ファイル命名規則
- ファイル名: kebab-case（例: `download-page.html`, `smart-display.js`）
- 変数・関数: camelCase（例: `getTrackRecord`）
- クラス: PascalCase（例: `TrackRecord`）

### 8.5 ディレクトリ構造

詳細なディレクトリ構成は **セクション6.1「ページ・ディレクトリ構成」** を参照してください。

基本的な構造：
- ルートに `index.html`（トップページ）
- `/css/`, `/js/`, `/img/` で共通リソースを管理
- 各機能ごとにディレクトリを分割（`/label/`, `/download/`, `/mission/` など）
- 法的ページは専用ディレクトリ（`/cookie-policy/`, `/privacy_policy/`, `/terms_of_condition/`）

将来的な拡張：
- `/public/s/` - 公開用証明書ページ（ショートURL用）
- `/dashboard/` - マイページ／ダッシュボード
- `/data/` - JSONデータ（デモ用、将来的にはAPIに置き換え）

---

## 9. 開発時の注意事項

### 9.1 セキュリティ
- ユーザー入力のサニタイズ（XSS対策）
- 将来的なAPI実装時はCSRF対策も考慮

### 9.2 アクセシビリティ
- 適切なHTMLセマンティクス（`<header>`, `<main>`, `<nav>` など）
- ARIA属性の適切な使用
- キーボード操作の対応
- コントラスト比の確保
- **画像のalt属性：すべての画像要素（`<img>`）には、SEO的に完璧なalt属性を必ず付与すること。マークダウンファイルに記載がなくても、画像の内容を適切に説明するalt属性を設定すること。**

### 9.3 パフォーマンス
- 画像の最適化（WebP対応など）
- 不要なリソースの読み込みを避ける
- モバイル環境での読み込み速度を意識

### 9.4 ブラウザ対応
- Chrome, Firefox, Safari, Edge の最新版
- モバイルブラウザ（iOS Safari, Chrome Mobile）も対応

---

## 10. 今後の拡張予定

- サムネイル生成機能（5.5参照）
- バックエンドAPI実装
- SNS認証の実装
- ショートURL生成機能
- QRコード生成機能
- ラベル画像のカスタマイズ機能

---

## 11. 不明点・要確認事項

以下の点について、実装前に確認・決定が必要です：

1. **ショートURL生成方法**
   - 現段階ではダミーURLで良いか
   - 将来的な実装方法（自前API or 外部サービス）

2. **QRコード生成**
   - クライアント側で生成するか（ライブラリ使用）
   - サーバー側で生成するか

3. **ラベル画像の生成方法**
   - Canvas APIで動的生成するか
   - テンプレート画像に情報を重ねるか

4. **データ永続化**
   - ローカルストレージを使用するか
   - 将来的なデータベース設計の方向性

5. **SNS認証のモック実装範囲**
   - どの程度の機能をモックで実装するか
   - ログイン状態の管理方法（セッションストレージ等）

---

## 12. 作業開始時の確認チェックリスト

新しい機能やページを実装する際は、以下の項目を確認してください。これにより、毎回プロジェクトの背景を説明する必要がなくなります。

### 12.1 実装対象の確認

- [ ] **実装するページ/機能は何か？**
  - 例：ダウンロードページ、マイページ、ホームページなど

- [ ] **優先順位は？**
  - 最優先 / 重要 / 後回し可

- [ ] **既存の参考実装はあるか？**
  - スクリーンショットの有無
  - 既存のWordPress実装の挙動（コードは参考にしない）

### 12.2 デザイン・UIの確認

- [ ] **デザインの参考資料はあるか？**
  - スクリーンショットの有無
  - デザインカンプの有無
  - 参考サイトのURL

- [ ] **PC・スマホ両方のデザインがあるか？**
  - 両方ある場合は両方確認
  - 片方しかない場合は、もう片方も設計・実装が必要

- [ ] **既存のデザインシステムとの整合性**
  - テーマカラー（青系 `#39f`）
  - カードスタイル、角丸、ドロップシャドウ
  - フォント（Meiryo,"Hiragino Kaku Gothic ProN","Hiragino Sans",sans-serif）

### 12.3 技術的な確認

- [ ] **使用するライブラリはあるか？**
  - QRコード生成ライブラリ（例：qrcode.js）
  - Canvas操作ライブラリ
  - その他の外部ライブラリ

- [ ] **データの取得方法は？**
  - 静的JSONファイル
  - モックデータ
  - 将来的なAPI設計を考慮した構造

- [ ] **レスポンシブ対応の確認**
  - ブレイクポイント：375px（スマホ）
  - PC・スマホ両方で動作確認が必要

### 12.4 機能的な確認

- [ ] **入力フォームがあるか？**
  - バリデーション要件
  - 送信先（現段階はモックでOK）

- [ ] **動的な機能はあるか？**
  - ゲージ表示（AI使用率）
  - ラベル画像生成
  - QRコード生成
  - ダウンロード機能

- [ ] **認証が必要か？**
  - SNSログイン（現段階はモック）
  - ログイン状態の管理

### 12.5 ファイル構成の確認

- [ ] **作成するファイルは？**
  - HTMLファイル
  - CSSファイル（`/css/` に配置）
  - JavaScriptファイル（`/js/` に配置）
  - 画像ファイル（`/img/` に配置）

- [ ] **ディレクトリ構成は適切か？**
  - セクション6.1「ページ・ディレクトリ構成」に従っているか

### 12.6 実装後の確認事項

- [ ] **PC・スマホ両方で動作確認**
  - レイアウト崩れがないか
  - テキストが読みやすいか
  - ボタンが押しやすいか

- [ ] **アクセシビリティ**
  - 適切なHTMLセマンティクス
  - ARIA属性の使用
  - キーボード操作の対応

- [ ] **パフォーマンス**
  - 画像の最適化
  - 不要なリソースの読み込みを避ける

---

## 13. 作業開始時の簡易テンプレート

新しい機能を実装する際は、以下の形式で情報を提供してください：

```
【実装依頼】
- 対象：○○ページ / ○○機能
- 優先度：高/中/低
- 参考資料：スクリーンショットあり/なし
- その他：○○の部分は特に注意してほしい
```

例：
```
【実装依頼】
- 対象：ダウンロードページの判定結果画面
- 優先度：高
- 参考資料：スクリーンショットあり（PC・スマホ両方）
- その他：ゲージの表示が5段階（20,40,60,80,100%）で視覚的に分かるように
```

